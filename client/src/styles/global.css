:root {
  color-scheme: dark;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  --color-bg: #0f172a;
  --color-surface: #1e293b;
  --color-surface-alt: #111827;
  --color-border: rgba(148, 163, 184, 0.25);
  --color-border-strong: rgba(148, 163, 184, 0.4);
  --color-text: #e2e8f0;
  --color-text-muted: #94a3b8;
  --color-accent: #38bdf8;
  --color-danger: #f87171;
  --shadow-elevated: 0 16px 40px rgba(8, 15, 35, 0.45);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  background-color: var(--color-bg);
  color: var(--color-text);
  min-height: 100vh;
}

a {
  color: inherit;
}

.app-shell {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.app-main {
  flex: 1;
  padding: 1rem clamp(0.75rem, 2vw, 1.5rem);
  background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.12), transparent 45%),
    radial-gradient(circle at bottom right, rgba(99, 102, 241, 0.1), transparent 40%),
    var(--color-bg);
}

.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.2rem;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.35);
  background: rgba(30, 41, 59, 0.85);
  color: var(--color-text);
  font-size: 0.75rem;
  font-weight: 500;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  padding: 0.35rem 0.75rem;
  cursor: pointer;
  transition: background-color 120ms ease, transform 120ms ease, border-color 120ms ease;
}

.button:hover {
  transform: translateY(-1px);
  border-color: rgba(56, 189, 248, 0.55);
  background: rgba(56, 189, 248, 0.18);
}

.button:disabled {
  cursor: not-allowed;
  opacity: 0.65;
  transform: none;
}

.button-group {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}
.button-group--micro {
  gap: 0.3rem;
}

.panel__actions--stacked {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.35rem;
}

.button--mini {
  padding: 0.2rem 0.55rem;
  border-radius: 10px;
  font-size: 0.7rem;
  text-transform: none;
  letter-spacing: 0.02em;
}

.button--mini-active {
  background: rgba(56, 189, 248, 0.2);
  border-color: rgba(56, 189, 248, 0.7);
}

.button--micro {
  padding: 0.15rem 0.4rem;
  border-radius: 8px;
  font-size: 0.65rem;
  text-transform: none;
  letter-spacing: 0.015em;
}

.button--micro-active {
  background: rgba(56, 189, 248, 0.24);
  border-color: rgba(56, 189, 248, 0.75);
  color: var(--color-text);
}

.page {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.transfer-panels {
  display: grid;
  gap: 0.75rem;
}

@media (min-width: 900px) {
  .transfer-panels {
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    align-items: stretch;
  }
}

/* Distribution panels row (Data Size Distribution + Accumulated Traffic)
   Matches the layout behavior of .transfer-panels so it spans the full
   available width and becomes responsive at larger viewports. */
.distribution-panels {
  width: 100%;
  display: grid;
  gap: 0.75rem;
}

@media (min-width: 900px) {
  .distribution-panels {
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    align-items: stretch;
  }
}

/* Controls layout inside panels that have multiple control groups */
.panel-controls {
  display: flex;
  gap: 2rem; /* larger separation between left and right control groups on desktop */
  align-items: center;
  width: 100%; /* ensure controls span available width so margin-left:auto can push the right group */
}
.panel-controls__left {
  display: flex;
  align-items: center;
}
.panel-controls__right {
  display: flex;
  margin-left: auto; /* push right group to the far edge */
  align-items: center;
  gap: 0.4rem;
}

.panel-controls__center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@media (max-width: 640px) {
  .panel-controls {
    flex-direction: column;
    align-items: stretch;
    gap: 0.5rem; /* smaller stacked gap on mobile */
  }
  .panel-controls__right {
    margin-left: 0;
    justify-content: flex-start;
  }
}

.panel {
  background: linear-gradient(160deg, rgba(15, 23, 42, 0.95), rgba(17, 24, 39, 0.92));
  border: 1px solid var(--color-border);
  border-radius: 18px;
  box-shadow: var(--shadow-elevated);
  padding: 0.75rem;
  backdrop-filter: blur(12px);
}

.panel--top {
  border: 1px solid rgba(56, 189, 248, 0.35);
  background: linear-gradient(150deg, rgba(15, 118, 110, 0.18), rgba(17, 24, 39, 0.92));
}

.panel__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Allow the left header column to shrink without pushing actions out of the panel
   and ensure subtitle text doesn't overflow the panel. This prevents long node
   lists or IDs from escaping the panel frame. */
.panel__header > div:first-child {
  min-width: 0; /* allow the left header column to shrink */
  flex: 1 1 auto;
}
.panel__actions {
  flex: 0 0 auto; /* keep actions sized to content */
}
.panel__subtitle {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.panel__actions {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
}

.button--ghost {
  background: transparent;
  border-color: rgba(148, 163, 184, 0.35);
}

.button--ghost:hover {
  background: rgba(56, 189, 248, 0.12);
  border-color: rgba(56, 189, 248, 0.5);
}

.panel__title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
}

.panel__subtitle {
  margin: 0.1rem 0 0;
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

.panel__body {
  margin-top: 0.6rem;
}

.panel__error {
  margin-top: 0.5rem;
  color: var(--color-danger);
  font-weight: 500;
}

.settings {
  margin-top: 0.5rem;
  background: rgba(15, 23, 42, 0.85);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 0.5rem 0.75rem;
  display: inline-flex;
  flex-direction: column;
  gap: 0.4rem;
  position: fixed !important;
  top: 72px !important; /* below top app bar */
  right: 20px !important;
  z-index: 2147483647 !important; /* make sure it's above everything */
  box-shadow: 0 8px 30px rgba(8, 15, 35, 0.6);
  width: min(360px, 90vw);
  max-width: 360px;
  pointer-events: auto;
  transform: translateZ(0); /* create new stacking context to avoid being clipped */
  overflow: auto;
}

.settings-overlay {
  position: fixed !important;
  inset: 0;
  z-index: 2147483646 !important;
  display: flex;
  justify-content: flex-end;
  align-items: flex-start;
  padding-top: 56px; /* offset from top bar */
  pointer-events: auto;
}

.settings__item {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.85rem;
  color: var(--color-text);
}

.panel__status,
.panel__empty {
  margin: 0;
  color: var(--color-text-muted);
  font-size: 0.85rem;
}

.nodes-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  margin-top: 0.5rem;
  justify-content: center;
}

.node-card {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: rgba(15, 23, 42, 0.9);
  border: 1px solid rgba(56, 189, 248, 0.35);
  border-radius: 999px;
  padding: 0.4rem 0.75rem;
  transition: border-color 150ms ease, transform 150ms ease, background-color 150ms ease;
  width: max-content;
  min-width: 0;
  cursor: pointer;
  user-select: none;
}

.node-card:hover {
  border-color: rgba(56, 189, 248, 0.65);
  background: rgba(56, 189, 248, 0.18);
  transform: translateY(-1px);
}

.node-card:focus-visible {
  outline: 2px solid rgba(56, 189, 248, 0.65);
  outline-offset: 2px;
}

.node-card--selected {
  background: rgba(56, 189, 248, 0.22);
  border-color: rgba(56, 189, 248, 0.75);
  box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.15);
}

.node-card__name {
  margin: 0;
  font-weight: 600;
  font-size: 0.85rem;
  letter-spacing: 0.02em;
}

.reputations-grid {
  display: grid;
  gap: 0.75rem;
}

@media (min-width: 768px) {
  .reputations-grid {
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  }
}

.reputation-card {
  background: rgba(15, 23, 42, 0.9);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  padding: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

.reputation-card__header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 0.25rem;
}

.reputation-card__title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
}

.reputation-card__empty {
  margin: 0;
  color: var(--color-text-muted);
  font-size: 0.85rem;
}

.reputation-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.85rem;
}

.reputation-table th,
.reputation-table td {
  padding: 0.3rem 0.35rem;
  text-align: left;
  border-bottom: 1px solid rgba(148, 163, 184, 0.15);
}

.reputation-table tbody tr:last-of-type th,
.reputation-table tbody tr:last-of-type td {
  border-bottom: none;
}

.reputation-table th {
  font-weight: 600;
  color: var(--color-text);
}

.reputation-table td {
  color: var(--color-text-muted);
}

/* Hourly traffic table layout */
.hourly-grid {
  width: 100%;
}
.hourly-grid .table {
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
}
.hourly-grid .table th,
.hourly-grid .table td {
  padding: 0.4rem 0.6rem;
  border-bottom: 1px solid rgba(148, 163, 184, 0.24);
  color: var(--color-text-muted);
  font-size: 0.9rem;
}
.hourly-grid .table thead th {
  color: var(--color-text);
  font-weight: 600;
}
.hourly-grid .table tbody tr:last-of-type td {
  border-bottom: none;
}
.hourly-grid .table td:first-child {
  text-align: left;
}
.hourly-grid .table td:not(:first-child) {
  text-align: right;
}

/* stronger divider under table header */
.hourly-grid .table thead th {
  border-bottom: 2px solid rgba(148, 163, 184, 0.4);
}

/* Column width helpers for hourly table */
.hourly-grid .table th.col-time,
.hourly-grid .table td.col-time {
  width: 14%;
  text-align: left;
}
.hourly-grid .table th.col-dlpct,
.hourly-grid .table td.col-dlpct {
  width: 20%;
  text-align: right;
}
.hourly-grid .table th.col-ulpct,
.hourly-grid .table td.col-ulpct {
  width: 20%;
  text-align: right;
}
.hourly-grid .table th.col-dlspeed,
.hourly-grid .table td.col-dlspeed {
  width: 23%;
  text-align: right;
}
.hourly-grid .table th.col-ulspeed,
.hourly-grid .table td.col-ulspeed {
  width: 23%;
  text-align: right;
}

.performance-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.75rem;
}

.performance-cell {
  background: rgba(15, 23, 42, 0.92);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 0.85rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  text-align: center;
  min-height: 100px;
}

.performance-cell--top {
  background: linear-gradient(160deg, rgba(99, 102, 241, 0.12), rgba(15, 23, 42, 0.92));
}

.performance-label {
  margin: 0;
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--color-text-muted);
}

.performance-value {
  margin: 0;
  font-size: 2rem;
  font-weight: 600;
  color: var(--color-text);
}

.performance-subvalue {
  margin: 0;
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

.performance-data-value {
  margin: 0.6rem 0;
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--color-text);
}

@media (max-width: 640px) {
  .performance-grid {
    grid-template-columns: 1fr;
  }
}

.traffic-chart {
  width: 100%;
  height: 300px;
  overflow: hidden; /* prevent chart SVG content (long labels) from spilling out of the panel */
}

@media (max-width: 640px) {
  .panel {
    padding: 1.2rem;
  }

  .app-main {
    padding: 1.5rem 1rem;
  }
}
/* Recharts tooltip styling: make tooltip background readable and labels high-contrast */
.recharts-tooltip-wrapper {
  z-index: 2500;
  /* ensure tooltip appears above overlays */
}

.recharts-default-tooltip {
  background: rgba(248, 250, 252, 0.507);
  /* very light background for readable text */
  color: #0b1220;
  /* very dark label text */
  border-radius: 8px;
  /* even tighter padding to minimize vertical footprint */
  padding: 2px 4px;
  border: 1px solid rgba(11, 18, 32, 0.06);
  box-shadow: 0 8px 10px rgba(8, 15, 35, 0.45);
  min-width: 100px;
  line-height: 1.05;
  font-size: 14px;
}

.recharts-default-tooltip .label {
  color: #0b1220;
  font-weight: 700;
  font-size: 13px;
  margin-bottom: 4px;
}

.recharts-default-tooltip table {
  color: #0b1220;
  border-collapse: collapse;
  line-height: 1.0;
}
.recharts-default-tooltip table td,
.recharts-default-tooltip table th {
  padding: 0px 3px;
}

/* Payout summary in panels (Pay · Held · Est) */
.payout-summary {
  margin: 0.6rem 0;
  font-size: 1.25rem; /* slightly larger than regular text */  
  font-weight: 600;
  color: var(--color-text);
  display: flex;
  gap: 1rem;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}
@media (max-width: 640px) {
  .payout-summary {
    font-size: 0.95rem;
    flex-direction: column;
    align-items: flex-start;
    gap: 0.35rem;
  }
}

/* Tooltip layout rows inside the payout tooltip */
.payout-tooltip {
  background: var(--color-surface);
  border: 1px solid var(--color-border-strong);
  color: var(--color-text);
  padding: 0.5rem 0.6rem;
  border-radius: 8px;
  box-shadow: 0 8px 30px rgba(8, 15, 35, 0.6);
  min-width: 180px;
  transform-origin: top left;
  z-index: 9999;
}
.payout-tooltip__row {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  padding: 0.12rem 0;
  font-size: 0.9rem;
}

.payout-tooltip__title {
  text-align: center;
  font-weight: 700;
  margin-bottom: 0.4rem;
}

.payout-tooltip__sep {
  height: 1px;
  background: var(--color-border-strong);
  margin: 0.35rem 0;
  border-radius: 1px;
}